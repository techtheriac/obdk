<template>
  <div class="stacked_item" :data-stack-order="stackOrder" @click="updateStackOrder">
    <div v-if="section == 'essays'" class="stacked-header">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 931 2148" fill="none">

<path d="M629.978 1361.56H930.316V1481.57H629.978V1361.56ZM509.97 1481.57H241.381L241.381 1361.56H509.97V1481.57ZM629.978 1361.56H509.97V883.436H629.978L629.978 1361.56ZM241.381 1361.56H121.373L121.373 1242.19H241.381V1361.56ZM121.373 1242.19H2L2 1002.81H121.373L121.373 1242.19ZM241.381 1002.81H121.373V883.436H241.381L241.381 1002.81ZM930.316 883.436H629.978V763.428H930.316V883.436ZM509.97 883.436H241.381V763.428H509.97V883.436Z" fill="black"/>

<path d="M2 2147.2L2 2024.02H826.182V1572.56H930.316V2147.2H2Z" fill="black"/>

<path d="M928.316 650.203H0L0 312.403C0 231.974 22.2237 166.361 66.6711 115.564C111.119 64.7673 171.652 39.3689 248.271 39.3689C340.552 39.3689 408.916 88.261 453.364 186.045H455.268C465.005 130.169 488.075 85.2978 524.479 51.4331C560.461 17.1451 607.448 0.000976562 665.441 0.000976562C750.526 0.000976562 815.716 28.3628 861.01 85.0862C905.88 141.386 928.316 219.698 928.316 320.022V650.203ZM824.182 527.02V299.069C824.182 246.578 810.213 204.248 782.274 172.076C753.913 139.905 714.968 123.819 665.441 123.819C616.761 123.819 578.663 139.905 551.148 172.076C523.633 204.248 509.875 246.578 509.875 299.069V527.02H824.182ZM405.741 527.02V335.896C405.741 281.29 392.407 238.747 365.739 208.269C338.647 177.791 299.491 162.552 248.271 162.552C152.179 162.552 104.134 220.333 104.134 335.896L104.134 527.02H405.741Z" fill="black"/>

</svg>
  	</div>

		<div v-if="section == 'musings'" class="stacked-header">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 974 5200" fill="none">

<path d="M970.539 5199.22H42.2237L43.4936 4991.58L826.403 4731.25V4729.98L42.2237 4472.82L42.2237 4264.55H970.539V4387.73H172.391V4390.27L970.539 4659.5V4803L172.391 5073.49V5076.03L970.539 5076.03V5199.22Z" fill="black"/>

<path d="M42.2237 4042.58H851.166V4162.58H42.2237L42.2237 4042.58ZM970.539 4042.58H851.166V3564.45H970.539V4042.58ZM851.166 3564.45H42.2237L42.2237 3444.44H851.166V3564.45Z" fill="black"/>

<path d="M662.901 3223.31C730.631 3220.77 781.851 3198.54 816.562 3156.64C851.274 3114.3 868.629 3058.22 868.629 2988.37C868.629 2929.95 854.872 2881.49 827.357 2842.96C799.418 2804.44 758.569 2785.18 704.809 2785.18C684.067 2785.18 665.864 2788.57 650.202 2795.34C634.116 2802.11 621.205 2810.58 611.469 2820.74C601.31 2830.48 591.785 2844.66 582.896 2863.28C574.006 2881.49 567.022 2898.21 561.942 2913.44C556.862 2928.26 550.513 2948.58 542.893 2974.4C542.047 2977.79 541.412 2980.54 540.988 2982.66C540.142 2984.35 539.295 2986.89 538.449 2990.28C537.602 2993.24 536.755 2995.99 535.909 2998.53C511.357 3081.92 490.191 3140.76 472.412 3175.05C435.161 3247.86 384.364 3291.67 320.021 3306.49C304.359 3309.87 287.427 3311.78 269.224 3312.2C225.623 3313.05 186.467 3305.22 151.756 3288.71C117.045 3272.2 88.8948 3249.34 67.3061 3220.13C45.294 3190.92 28.5733 3157.69 17.144 3120.44C5.71467 3082.77 0 3042.55 0 2999.8C0 2904.98 23.7053 2829.42 71.1158 2773.12C118.526 2716.39 187.949 2684.43 279.384 2677.24V2802.33C219.697 2811.22 175.673 2831.32 147.311 2862.65C118.526 2893.97 104.134 2939.69 104.134 2999.8C104.134 3055.68 116.833 3101.18 142.232 3136.32C167.63 3171.03 206.998 3188.38 260.335 3188.38C278.96 3188.38 295.893 3184.79 311.132 3177.59C326.371 3169.97 339.282 3160.45 349.865 3149.02C360.447 3137.59 370.607 3122.14 380.343 3102.66C390.079 3083.19 398.333 3063.93 405.106 3044.88C411.456 3025.83 418.652 3002.55 426.695 2975.04C448.707 2898.84 464.37 2848.89 473.682 2825.18C502.044 2755.76 540.565 2708.99 589.246 2684.86C620.57 2669.62 657.822 2662 700.999 2662C737.827 2662 771.48 2668.14 801.958 2680.41C832.436 2692.27 858.047 2708.56 878.789 2729.31C899.531 2749.62 917.098 2773.75 931.491 2801.69C945.883 2829.63 956.254 2859.26 962.604 2890.59C969.377 2921.91 972.763 2954.51 972.763 2988.37C972.763 3040.01 966.413 3087.21 953.714 3129.97C941.015 3172.72 922.389 3210.4 897.838 3242.99C872.862 3275.16 840.479 3300.56 800.688 3319.19C760.474 3337.39 714.545 3346.7 662.901 3347.12V3223.31Z" fill="black"/>

<path d="M663.901 561.307C731.631 558.767 782.851 536.543 817.562 494.636C852.274 452.305 869.629 396.216 869.629 326.37C869.629 267.954 855.872 219.485 828.357 180.964C800.418 142.443 759.569 123.182 705.809 123.182C685.067 123.182 666.864 126.569 651.202 133.342C635.116 140.115 622.205 148.581 612.469 158.741C602.31 168.477 592.785 182.657 583.896 201.283C575.006 219.485 568.022 236.206 562.942 251.445C557.862 266.261 551.513 286.579 543.893 312.401C543.047 315.788 542.412 318.54 541.988 320.656C541.142 322.349 540.295 324.889 539.449 328.276C538.602 331.239 537.755 333.99 536.909 336.53C512.357 419.922 491.191 478.762 473.412 513.05C436.161 585.859 385.364 629.671 321.021 644.487C305.359 647.874 288.427 649.778 270.224 650.201C226.623 651.048 187.467 643.217 152.756 626.708C118.045 610.199 89.8948 587.34 68.3061 558.132C46.294 528.924 29.5733 495.694 18.144 458.443C6.71467 420.768 1 380.554 1 337.8C1 242.979 24.7053 167.418 72.1158 111.118C119.526 54.3946 188.949 22.4348 280.384 15.2386L280.384 140.326C220.697 149.216 176.673 169.323 148.311 200.648C119.526 231.973 105.134 277.69 105.134 337.8C105.134 393.677 117.833 439.183 143.232 474.317C168.63 509.028 207.998 526.384 261.335 526.384C279.96 526.384 296.893 522.786 312.132 515.59C327.371 507.97 340.282 498.446 350.865 487.016C361.447 475.587 371.607 460.136 381.343 440.664C391.079 421.192 399.333 401.931 406.106 382.882C412.456 363.833 419.652 340.551 427.695 313.036C449.707 236.841 465.37 186.891 474.682 163.185C503.044 93.7627 541.565 46.9868 590.246 22.8582C621.57 7.61911 658.822 -0.000178384 701.999 -0.000178384C738.827 -0.000178384 772.48 6.13745 802.958 18.4134C833.436 30.266 859.047 46.5638 879.789 67.306C900.531 87.6248 918.098 111.753 932.491 139.692C946.883 167.63 957.254 197.261 963.604 228.586C970.377 259.911 973.763 292.506 973.763 326.37C973.763 378.014 967.413 425.213 954.714 467.967C942.015 510.721 923.389 548.396 898.838 580.991C873.862 613.162 841.479 638.561 801.688 657.186C761.474 675.389 715.545 684.701 663.901 685.125V561.307Z" fill="black"/>

<path d="M42.2237 2596.22L42.2237 2473.03H970.539V2596.22H42.2237Z" fill="black"/>

<path d="M44.2237 2382.22L44.2237 2231.73L630.294 1869.8C648.92 1857.95 677.282 1840.81 715.379 1818.37C753.054 1795.51 781.204 1778.16 799.83 1766.3C778.664 1766.3 747.974 1766.73 707.76 1767.57C667.122 1768.42 636.221 1768.84 615.055 1768.84H44.2237L44.2237 1645.03H972.539V1799.96L389.644 2159.98C371.441 2171.83 343.926 2188.76 307.098 2210.78C270.27 2232.79 242.755 2249.72 224.553 2261.57C246.142 2261.57 278.102 2261.15 320.433 2260.3C362.34 2259.46 394.088 2259.03 415.677 2259.03H972.539V2382.22H44.2237Z" fill="black"/>

<path d="M42.2237 891.606H161.597V1399.58H42.2237L42.2237 891.606ZM851.166 1519.58H161.597V1399.58H851.166V1519.58ZM970.539 1399.58H851.166V891.606H970.539V1399.58ZM550.194 1160.83H430.821V891.606H550.194V1160.83ZM851.166 891.606H550.194V771.598H851.166V891.606ZM281.605 891.606H161.597V771.598H281.605V891.606Z" fill="black"/>

</svg>
		</div>

	<div v-if="section == 'contact'" class="stacked-header">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 971 5910" fill="none">

<path d="M671.156 5017.05C710.1 5026.36 746.928 5042.45 781.639 5065.31C815.927 5087.74 846.829 5116.31 874.344 5151.03C901.436 5185.31 923.024 5227.22 939.11 5276.75C954.773 5325.85 962.604 5378.98 962.604 5436.12C962.604 5510.63 949.904 5578.14 924.506 5638.68C898.684 5699.21 863.761 5748.95 819.737 5787.89C775.713 5826.84 724.916 5856.89 667.346 5878.06C609.353 5898.8 547.338 5909.17 481.302 5909.17C415.266 5909.17 353.463 5898.8 295.893 5878.06C237.899 5856.89 186.891 5826.84 142.867 5787.89C98.8426 5748.95 64.1313 5699.21 38.7327 5638.68C12.9109 5578.14 0 5510.63 0 5436.12C0 5379.4 7.4079 5327.76 22.2237 5281.19C36.6162 5234.63 57.1467 5194.63 83.8151 5161.19C110.484 5127.32 140.962 5098.75 175.25 5075.47C209.114 5052.18 247.424 5033.13 290.178 5018.32V5142.14C229.222 5168.81 183.081 5205.63 151.756 5252.62C120.008 5299.18 104.134 5360.35 104.134 5436.12C104.134 5492.42 114.293 5543.22 134.612 5588.52C154.931 5633.39 182.658 5670 217.792 5698.36C252.504 5726.73 292.295 5748.53 337.165 5763.77C382.036 5778.58 430.082 5785.99 481.302 5785.99C532.522 5785.99 580.568 5778.58 625.438 5763.77C670.309 5748.95 710.312 5727.36 745.446 5699C780.158 5670.64 807.673 5634.02 827.992 5589.15C848.31 5543.86 858.47 5492.85 858.47 5436.12C858.47 5359.93 841.538 5296.64 807.673 5246.27C773.385 5195.47 727.879 5160.34 671.156 5140.87V5017.05Z" fill="black"/>

<path d="M153.517 4709.63H273.525V4829H153.517L153.517 4709.63ZM723.079 4949.01H273.525V4829H723.079V4949.01ZM843.087 4829H723.079V4709.63H843.087V4829ZM962.46 4709.63H843.087V4350.88H962.46V4709.63ZM153.517 4709.63H34.144L34.144 4350.88H153.517V4709.63ZM843.087 4350.88H723.079V4230.87H843.087V4350.88ZM273.525 4350.88H153.517L153.517 4230.87H273.525V4350.88ZM723.079 4230.87H273.525V4111.5H723.079V4230.87Z" fill="black"/>

<path d="M30.144 4019.64L30.144 3869.16L616.215 3507.23C634.84 3495.38 663.202 3478.23 701.3 3455.8C738.974 3432.94 767.124 3415.58 785.75 3403.73C764.584 3403.73 733.895 3404.15 693.68 3405C653.043 3405.85 622.141 3406.27 600.976 3406.27H30.144L30.144 3282.45H958.46V3437.38L375.564 3797.41C357.362 3809.26 329.846 3826.19 293.019 3848.2C256.191 3870.22 228.676 3887.15 210.473 3899C232.062 3899 264.022 3898.58 306.353 3897.73C348.26 3896.89 380.009 3896.46 401.597 3896.46H958.46V4019.64H30.144Z" fill="black"/>

<path d="M138.278 3187.75H34.144L34.144 2495H138.278V2779.46H962.46V2903.28H138.278V3187.75Z" fill="black"/>

<path d="M679.156 737.049C718.1 746.362 754.928 762.447 789.639 785.306C823.927 807.742 854.829 836.315 882.344 871.026C909.436 905.314 931.024 947.222 947.11 996.749C962.773 1045.85 970.604 1098.98 970.604 1156.12C970.604 1230.63 957.904 1298.14 932.506 1358.68C906.684 1419.21 871.761 1468.95 827.737 1507.89C783.713 1546.84 732.916 1576.89 675.346 1598.06C617.353 1618.8 555.338 1629.17 489.302 1629.17C423.266 1629.17 361.463 1618.8 303.893 1598.06C245.899 1576.89 194.891 1546.84 150.867 1507.89C106.843 1468.95 72.1313 1419.21 46.7327 1358.68C20.9109 1298.14 8 1230.63 8 1156.12C8 1099.4 15.4079 1047.76 30.2237 1001.19C44.6162 954.629 65.1467 914.627 91.8151 881.186C118.484 847.321 148.962 818.747 183.25 795.465C217.114 772.183 255.424 753.135 298.178 738.319L298.178 862.137C237.222 888.805 191.081 925.633 159.756 972.62C128.008 1019.18 112.134 1080.35 112.134 1156.12C112.134 1212.42 122.293 1263.22 142.612 1308.52C162.931 1353.39 190.658 1390 225.792 1418.36C260.504 1446.73 300.295 1468.53 345.165 1483.77C390.036 1498.58 438.082 1505.99 489.302 1505.99C540.522 1505.99 588.568 1498.58 633.438 1483.77C678.309 1468.95 718.312 1447.36 753.446 1419C788.158 1390.64 815.673 1354.02 835.992 1309.15C856.31 1263.86 866.47 1212.85 866.47 1156.12C866.47 1079.93 849.538 1016.64 815.673 966.271C781.385 915.473 735.879 880.339 679.156 860.867V737.049Z" fill="black"/>

<path d="M138.278 692.745H34.144L34.144 0.000488281H138.278L138.278 284.464H962.46V408.282H138.278L138.278 692.745Z" fill="black"/>

<path d="M656.122 2333H956.46V2453.01H656.122V2333ZM536.114 2453.01H267.525V2333H536.114V2453.01ZM656.122 2333H536.114V1854.88H656.122V2333ZM267.525 2333H147.517V2213.63H267.525V2333ZM147.517 2213.63H28.144L28.144 1974.25H147.517V2213.63ZM267.525 1974.25H147.517L147.517 1854.88H267.525V1974.25ZM956.46 1854.88H656.122V1734.87H956.46V1854.88ZM536.114 1854.88H267.525V1734.87H536.114V1854.88Z" fill="black"/>

</svg>
	</div>
    <Musings v-if="section === 'musings'" />
    <Contact v-if="section === 'contact'" />
    <Essays v-if="section === 'essays'" />
  </div>
</template>

<script setup lang="ts">
import { onMounted } from "vue";
import { Sections } from "~/obdk";

const stackStore = useStackStore();

const props = defineProps<{
  section?: Sections;
  stackOrder: number;
}>();

const order = ref(props.stackOrder);

function updateStackOrder(): void {
 const stackOrder = order.value == 0 ? [0, 1, 2] : order.value == 1 ? [1, 0, 2] : [2, 0, 1]
 stackStore.updateStackOrder(stackOrder);
}

function updateStackedHeaderSize(): number {
  const stackedHeader = document.querySelector(".stacked-header");
  if (!stackedHeader) return 0;

  let stackedHeight = stackedHeader.getBoundingClientRect().width;

  document.documentElement.style.setProperty(
    "--stacked-header-size",
    `${stackedHeight / 2}px`
  );

  return stackedHeight;
}

onMounted(() => {
  updateStackedHeaderSize();
  window.addEventListener("resize", () => updateStackedHeaderSize());
});

onUnmounted(() => {
  window.removeEventListener("resize", updateStackedHeaderSize);
});

</script>

<style lang="scss" scoped>
@import "../assets/css/utilities/font-definitions";
.stacked_item {
  position: absolute;
  display: grid;
  grid-template-columns: minmax(40px, 5%) 1fr;
  height: 100%;
  transition-property: background-color;
  transition-duration: 0.5s;
  transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  width: 100%;
}

.stacked-header {
	display: flex;
	justify-content: center;
	align-items: flex-end;
	padding: var(--space-xs);

	svg {
		width: 100%;
	}
}
</style>
